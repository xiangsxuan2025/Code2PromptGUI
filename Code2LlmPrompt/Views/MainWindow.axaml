<Window
xmlns="https://github.com/avaloniaui"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:vm="clr-namespace:Code2LlmPrompt.ViewModels"
xmlns:controls="clr-namespace:Code2LlmPrompt.Views.Controls"
x:Class="Code2LlmPrompt.Views.MainWindow"
x:DataType="vm:MainViewModel"
Title="Code2Prompt GUI"
Width="550"
Height="420"
MinWidth="450"
MinHeight="350"
WindowStartupLocation="CenterScreen"
Name="MainWindowControl"
Background="#0f0f23"
SystemDecorations="None"
>

	<Window.Styles>
		<StyleInclude Source="avares://Avalonia.Themes.Fluent/FluentTheme.xaml" />
		<StyleInclude Source="avares://Code2LlmPrompt/Styles/GeekTheme.axaml" />
	</Window.Styles>

	<DockPanel>
		<!-- è‡ªå®šä¹‰æ ‡é¢˜æ  -->
		<Border DockPanel.Dock="Top" Height="30" Background="#1a1a2e" BorderThickness="0,0,0,1" BorderBrush="#00ff41">
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*" />
					<ColumnDefinition Width="Auto" />
				</Grid.ColumnDefinitions>

				<!-- æ ‡é¢˜å’Œæ‹–åŠ¨åŒºåŸŸ -->
				<TextBlock
				Grid.Column="0"
				Text="ðŸš€ Code2Prompt GUI"
				Foreground="#00ff41"
				FontSize="12"
				FontWeight="Bold"
				VerticalAlignment="Center"
				HorizontalAlignment="Left"
				Margin="10,0,0,0"
				/>

				<!-- çª—å£æŽ§åˆ¶æŒ‰é’® -->
				<StackPanel Grid.Column="1" Orientation="Horizontal">
					<Button
					Content="â”€"
					Width="40"
					Height="30"
					Background="Transparent"
					Foreground="#cccccc"
					BorderThickness="0"
					FontSize="12"
					Click="MinimizeClick"
					Classes="titlebar-btn"
					/>
					<Button
					Content="â"
					Width="40"
					Height="30"
					Background="Transparent"
					Foreground="#cccccc"
					BorderThickness="0"
					FontSize="10"
					Click="MaximizeClick"
					Classes="titlebar-btn"
					/>
					<Button
					Content="âœ•"
					Width="40"
					Height="30"
					Background="Transparent"
					Foreground="#cccccc"
					BorderThickness="0"
					FontSize="12"
					Click="CloseClick"
					Classes="titlebar-btn close-btn"
					/>
				</StackPanel>
			</Grid>
		</Border>

		<controls:StatusBarControl DockPanel.Dock="Bottom" />
		<!-- ä¸»å†…å®¹åŒºåŸŸ -->
		<Grid Margin="8">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*" />
				<ColumnDefinition Width="Auto" />
			</Grid.ColumnDefinitions>
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto" />
				<RowDefinition Height="*" />
			</Grid.RowDefinitions>

			<!-- Advanced Toggle Button - æ›´ä¸æ˜¾çœ¼ -->
			<Button
			Grid.Column="1"
			Grid.Row="0"
			Content="âš™ Advanced"
			Command="{Binding ToggleAdvancedCommand}"
			Classes="secondary-btn"
			Margin="0,0,0,5"
			HorizontalAlignment="Right"
			Width="90"
			Height="26"
			FontSize="11"
			/>

			<!-- å·¦ä¾§é…ç½®åŒºåŸŸ -->
			<ScrollViewer
			Grid.Column="0"
			Grid.Row="1"
			Margin="0,0,8,0"
			VerticalScrollBarVisibility="Auto">
				<StackPanel Spacing="6" Name="ConfigPanel">
					<controls:BasicSettingsControl />

					<!-- Advanced Controls - Collapsed by default -->
					<StackPanel Spacing="6" IsVisible="{Binding IsAdvancedMode}">
						<controls:FileSelectionControl />
						<controls:OutputFormatControl />
						<controls:GitIntegrationControl />
						<controls:TokenSettingsControl />
					</StackPanel>
				</StackPanel>
			</ScrollViewer>

			<!-- å³ä¾§è¾“å‡ºåŒºåŸŸ -->
			<Grid Grid.Column="1" Grid.Row="1" RowDefinitions="*,Auto">
				<controls:OutputPanelControl Grid.Row="0" />
			</Grid>

			<!-- å¤„ç†æ—¶çš„æ¨¡ç³Šè¦†ç›–å±‚ - åªè¦†ç›–ä¸»å†…å®¹åŒºåŸŸ -->
			<Border
			Grid.Column="0"
			Grid.ColumnSpan="2"
			Grid.Row="1"
			IsVisible="{Binding IsProcessing}"
			Background="#CC1a1a2e"
			ZIndex="1000">
				<Border.Effect>
					<BlurEffect Radius="8" />
				</Border.Effect>
			</Border>

			<!-- æ¸…æ™°çš„è¿›åº¦æŒ‡ç¤ºå™¨ -->
			<Border
			Grid.Column="0"
			Grid.ColumnSpan="2"
			Grid.Row="1"
			IsVisible="{Binding IsProcessing}"
			Background="Transparent"
			ZIndex="1001"
			HorizontalAlignment="Center"
			VerticalAlignment="Center">
				<StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="15" Background="#1a1a2e">
					<ProgressBar IsIndeterminate="True" Height="6" Width="300" Classes="progress-bar" />
					<TextBlock
					Text="Processing... Please wait"
					HorizontalAlignment="Center"
					Classes="processing-text"
					FontSize="14"
					/>
				</StackPanel>
			</Border>
		</Grid>
	</DockPanel>
</Window>
